![smart-gym-logo](https://github.com/rajakrishna/smart-gym/blob/master/public/smart-gym-logo.png)

# Smart Gym

Coordinating and organizing operations for a gym to make life easier for staff and members.

An app that serves as a center for membership management, class scheduling, ordering from the cafe and analytics for membership growth and usage.

# Technologies Used

<div style="display: flex; flex-wrap: wrap; gap: 8px;">
  <img style="height:100px;" src="https://cdn.brandfetch.io/id2alue-rx/theme/dark/idqNI71Hra.svg?c=1bxid64Mup7aczewSAYMX&t=1714556221292" alt="Next.js logo" />
  <img style="height:100px;" src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original-wordmark.svg" alt="React logo" />
  <img style="height:100px;" src="https://cdn.brandfetch.io/idKX_Hb7va/theme/dark/logo.svg?c=1bxid64Mup7aczewSAYMX&t=1748419318745" alt="TypeScript logo" />
  <img style="height:100px; width:160px" src="https://cdn.brandfetch.io/idsSceG8fK/theme/light/logo.svg?c=1bxid64Mup7aczewSAYMX&t=16610081495951" alt="Supabase logo" />
  <img style="height:100px; width:160px" src="https://cdn.brandfetch.io/idMNEQh7-0/theme/light/logo.svg?c=1bxid64Mup7aczewSAYMX&t=1687779045485" alt="Tailwind CSS logo" />
  <img style="height:100px; width:160px" src="https://lucide.dev/library-logos/shadcn-ui-light.svg" alt="Shadcn logo" />
  <img style="height:100px;width:160px" src="https://cdn.brandfetch.io/idxAg10C0L/theme/dark/logo.svg?c=1bxid64Mup7aczewSAYMX&t=1746435914582" alt="Stripe logo" />
  <img style="height:100px" src="https://upload.wikimedia.org/wikipedia/commons/3/33/Figma-logo.svg" alt="Figma logo" />
</div>

## Docs for this project

- [Next.js](https://nextjs.org/docs)
- [React](https://react.dev/)
- [TypeScript](https://www.typescriptlang.org/docs/)
- [Supabase](https://supabase.com/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [shadcn/ui](https://ui.shadcn.com/docs)
- [Stripe](https://stripe.com/docs)

## Team Contributors To The Project

<table style="width: 100%; display: flex; flex-wrap: wrap; justify-content: center;">
  <tr style="display: flex; flex-wrap: wrap; justify-content: center; width: 100%;">
    <td align="center" width="200" style="flex: 1; max-width: 200px; padding: 10px; border-radius: 50%;">
      <a href="www.linkedin.com/in/joeaguado">
        <img src="https://github.com/user-attachments/assets/ed822669-8b90-4d8e-bd15-82513aaffe3e" style="width: 100%; max-width: 150px; height: auto; border-radius: 50%; "alt="Joe Aguado Profile Picture" /><br />
        <sub><b>Joe Aguado</b></sub>
      </a>
    </td>
    <td align="center" width="200" style="flex: 1; max-width: 200px; padding: 10px;">
      <a href="https://www.linkedin.com/in/gojoego/">
        <img src="https://media.licdn.com/dms/image/v2/C5603AQGAtMQlfyBafw/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1525922045693?e=1755734400&v=beta&t=CtFk8lDe7GgoOU3NSKkp_GsZGqcD9J3nsRiacSldjb4" style="width: 100%; max-width: 150px; height: auto; border-radius: 50%;" alt="Joe Gallego Profile Picture" /><br />
        <sub><b>Joe Gallego</b></sub>
      </a>
    </td>
    <td align="center" width="200" style="flex: 1; max-width: 200px; padding: 10px;">
      <a href="https://linkedin.com/in/noahwhlim">
        <img src="https://avatars.githubusercontent.com/u/91938285?v=4" style="width: 100%; max-width: 150px; height: auto; border-radius: 50%;" alt="Noah Lim Profile Picture" /><br />
        <sub><b>Noah Lim</b></sub>
      </a>
    </td>
    <td align="center" width="200" style="flex: 1; max-width: 200px; padding: 10px;">
      <a href="https://www.linkedin.com/in/dannyrivasdev/">
        <img src="https://github.com/user-attachments/assets/53cebcf7-2e3e-46f3-9346-94ec5a27ad19" style="width: 100%; max-width: 150px; height: auto; border-radius: 50%;" 
        alt="Danny Rivas Profile Picture" /><br />
        <sub><b>Danny Rivas</b></sub>
      </a>
    </td>
    </tr>
   <tr style="display: flex; flex-wrap: wrap; justify-content: center; width: 100%;">
    <td align="center" width="200" style="flex: 1; max-width: 200px; padding: 10px;">
      <a href="https://www.linkedin.com/in/developerdiego/">
        <img src="https://media.licdn.com/dms/image/v2/D5635AQEH7-tkmh8rgw/profile-framedphoto-shrink_800_800/B56ZYiPX.lHoAg-/0/1744331178327?e=1754514000&v=beta&t=z5WYYml_5szjwihEfjwdIW3rrPXncMSDf5xy15eth0Q" style="width: 100%; max-width: 150px; height: auto; border-radius: 50%;" alt="Diego Espino Profile Picture" /><br />
        <sub><b>Diego Espino</b></sub>
      </a>
    </td>
    <td align="center" width="200" style="flex: 1; max-width: 200px; padding: 10px;">
      <a href="https://www.linkedin.com/in/rajakrishna/">
        <img src="https://media.licdn.com/dms/image/v2/D5603AQFDLs3Zm3m01A/profile-displayphoto-shrink_200_200/B56Zd56YWwGoAc-/0/1750097037071?e=1755734400&v=beta&t=BMpj0zVVOMehE_fiukehMx2GkxnrZvAtZ9UsDSjUPDo" style="width: 100%; max-width: 150px; height: auto; border-radius: 50%;" alt="Raja Krishna Profile Picture" /><br />
        <sub><b>Raja Krishna</b></sub>
        <br /><sub>(Tech Lead)</sub>
      </a>
    </td>
    <td align="center" width="200" style="flex: 1; max-width: 200px; padding: 10px;">
      <a href="https://www.linkedin.com/in/belle-duran-127760204/">
        <img src="https://media.licdn.com/dms/image/v2/C4E03AQG61KH5tTPj3A/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1617765154387?e=1755734400&v=beta&t=OfW7wIAZ5cQ9h1LIupO-L7sxVB25wqBw8nJYGaKgCs4" style="width: 100%; max-width: 150px; height: auto; border-radius: 50%;" alt="Belle Duran Profile Picture" /><br />
        <sub><b>Belle Duran</b></sub>
        <br /><sub>(Tech Lead)</sub>
      </a>
    </td>
  </tr>
</table>

# ğŸ’ª Smart Gym Documentation

## ğŸ“‘ Table of Contents

1. [ğŸ“Œ Introduction](#-introduction)
2. [ğŸ—ï¸ Architecture Overview](#-architecture-overview)
3. [ğŸ› ï¸ Technology Stack](#-technology-stack)
4. [ğŸ’¾ Database Schema](#-database-schema)
5. [ğŸ” Authentication Flow](#-authentication-flow)
6. [âœ¨ Key Features](#-key-features)
7. [ğŸ”Œ API Details](#-api-details)
8. [ğŸ§© Component Structure](#-component-structure)
9. [ğŸ”„ Data Flow](#-data-flow)
10. [ğŸš€ Deployment](#-deployment)
11. [ğŸ“ Commitlint Configuration](#-commitlint-configuration)
12. [ğŸ’» Jira/Git Workflow](#-jiragit-workflow)
13. [ğŸ¨ Design System](#-design-system)
14. [ğŸ“ Code Organization & Best Practices](#-code-organization--best-practices)

---

## ğŸ“Œ Introduction

[Project Name] is a [brief description of what your application does]. The application provides a modern solution to [describe the main problem you're solving], offering features such as [list 3-5 key features].

---

## ğŸ—ï¸ Architecture Overview

The application follows a [describe your architecture pattern] using [main framework/technology]. The architecture can be broken down into the following key components:

| Component                | Description                           |
| ------------------------ | ------------------------------------- |
| **Frontend**             | [Frontend description and technology] |
| **Backend API**          | [Backend description and technology]  |
| **Database**             | [Database description and technology] |
| **Authentication**       | [Auth service description]            |
| **[Additional Service]** | [Additional service description]      |

The application follows a [architectural pattern] where [describe the flow between components].

---

## ğŸ› ï¸ Technology Stack

### ğŸ–¥ï¸ Frontend

| Technology     | Version/Description |
| -------------- | ------------------- |
| **Framework**  | Next.js 15          |
| **UI Library** | shadcn/ui           |
| **Icons**      | Lucide, Radix Icons |
| **Styling**    | Tailwind CSS v4     |

### âš™ï¸ Backend

| Technology             | Version/Description |
| ---------------------- | ------------------- |
| **API Framework**      | Next.js API Routes  |
| **Database ORM**       | Supabase            |
| **Database**           | Supabase            |
| **Authentication**     | Supabase Auth       |
| **Payment Processing** | Stripe              |

### ğŸ§° Development Tools

| Tool           | Purpose                                   |
| -------------- | ----------------------------------------- |
| **TypeScript** | Type checking and static analysis         |
| **Prettier**   | Code formatting and style consistency     |
| **ESLint**     | Code linting and enforcing best practices |
| **Husky**      | Git hooks for pre-commit checks           |
| **Commitlint** | Enforces commit message conventions       |

---

## ğŸ’¾ Database Schema

The application uses a PostgreSQL(Supabase) database. Below is the ERD (Entity Relationship Diagram) illustrating the key models and their relationships:

![ERD Image](https://github.com/rajakrishna/smart-gym/blob/master/public/erd-image.png)

---

## ğŸ” Authentication Flow

The application uses [Authentication Service] for authentication. The authentication flow works as follows:

| Step | Description                |
| ---- | -------------------------- |
| 1    | [First step of auth flow]  |
| 2    | [Second step of auth flow] |
| 3    | [Third step of auth flow]  |
| 4    | [Fourth step of auth flow] |

---

## âœ¨ Key Features

### ğŸ“„ 1. [Feature Name]

- [Feature capability 1]
- [Feature capability 2]
- [Feature capability 3]

### ğŸšª 2. [Feature Name]

- [Feature capability 1]
- [Feature capability 2]
- [Feature capability 3]

### ğŸ“¦ 3. [Feature Name]

- [Feature capability 1]
- [Feature capability 2]
- [Feature capability 3]

### ğŸš— 4. [Feature Name]

- [Feature capability 1]
- [Feature capability 2]
- [Feature capability 3]

### ğŸ”” 5. [Feature Name]

- [Feature capability 1]
- [Feature capability 2]
- [Feature capability 3]

<!-- Add more features as needed -->

---

## ğŸ”Œ API Details

The application uses Next.js API Routes organized by feature:

### API Overview

<!-- Example:
| `/api/[notifications]` | Manage  notifications |
-->

| API Endpoint                        | Purpose                               |
| ----------------------------------- | ------------------------------------- |
| `/api/cafe/create`                  | create a cafe item                    |
| `/api/cafe/delete`                  | delete a cafe item                    |
| `/api/cafe/edit`                    | edit a cafe item                      |
| `/api/cafe/getAll`                  | get all cafe items                    |
| `/api/cafe/[productId]`             | get a single cafe item                |
| `/api/cafe/items/topPurchases`      | get top 5 cafe purchases              |
| `/api/classes/[classId]`            | get a single class                    |
| `/api/classes/create`               | creates class                         |
| `/api/classes/delete`               | deletes class                         |
| `/api/classes/enrolled/[classId]`   | get all members enrolled in a class   |
| `/api/classes/getAll`               | get classes                           |
| `/api/classes/update`               | updates class                         |
| `/api/classes/waitlisted/[classId]` | get all members waitlisted in a class |
| `/api/coaches/getAll`               | get all coaches                       |
| `/api/gemini/`                      | member AI assistant                   |
| `/api/messages/create`              | creates msg associated w user ID      |
| `/api/messages/delete`              | deletes msg associated w msg ID       |
| `/api/messages/getAll`              | get all msgs                          |
| `/api/messages/getByMessageId`      | gets msg by msg ID                    |
| `/api/messages/getByUserId`         | gets msgs by user ID                  |
| `/api/users/[userId]`               | gets user by user ID                  |
| `/api/users/create`                 | creates user                          |
| `/api/users/getAll`                 | get all users                         |
| `/api/users/update`                 | updates user                          |
| `/api/checkins`                     | gets all checkins by user i           |

---

### API Endpoints

<!-- Example:
- API Endpoint: `/api/notifications	`
- Purpose: Manage notifications
- Triggered by: Admin user
- Steps:
  - Admin user logs in
  - Admin user navigates to notifications page
  - Admin user clicks on "Manage Notifications" button
  - Admin user is redirected to notifications page
-->

- API Endpoint: `/api/[endpoint1]`
- Purpose: [Purpose description]
- Triggered by: [Triggered by description]
- Steps:
  - [Step 1]
  - [Step 2]
  - [Step 3]
  - [Step 4]

- API Endpoint: `/api/messages/getAll`
- Purpose: Get all messages
- Triggered by: Admin user
- Steps:
  - Admin user logs in
  - Admin user navigates to messages page
  - System fetches all messages from database

- API Endpoint: `/api/messages/getById`
- Purpose: Get messages relating to a specific user by user ID
- Triggered by: Admin user
- Steps:
  - Admin user selects a specific message
  - System queries database for messages associated with user ID
  - User-specific messages are returned and displayed in the admin UI

- API Endpoint: `/api/messages/create`
- Purpose: Create message associated with user ID
- Triggered by: Admin user
- Steps:
  - Admin user logs in
  - Admin user navigates to messages page
  - Admin user hits create new message button
  - Admin user fills out the form
  - System creates message record in database
  - Message is associated with specified user ID

- API Endpoint: `/api/cafe/getAll`
- Purpose: Get all cafe items
- Triggered by: User/Admin
- Steps:
  - User/Admin accesses cafe page
  - System fetches all product records from database
  - Cafe items are displayed with prices and availability + other data (e.g. description, image, etc.)

- API Endpoint: `/api/cafe/[productId]`
- Purpose: Get a single cafe item
- Triggered by: User/Admin
- Steps:
  - User/Admin selects specific product
  - System queries database using product ID
  - Individual product details are returned and displayed

- API Endpoint: `/api/cafe/create`
- Purpose: Create a cafe item
- Triggered by: Admin user
- Steps:
  - Admin user logs in
  - Admin user navigates to cafe page
  - Admin user navigates to product creation form
  - Admin user fills in product details and pricing + other data (e.g. description, image, etc.)
  - Admin user hits create new product button
  - System validates and saves new product to database
  - Product becomes available for purchase in the cafe

- API Endpoint: `/api/cafe/update`
- Purpose: Update a cafe item
- Triggered by: Admin user
- Steps:
  - Admin user logs in
  - Admin user navigates to cafe page
  - Admin user selects product to modify
  - Admin user updates product information
  - System validates changes and updates database record
  - Updated product information is reflected in cafe

- API Endpoint: `/api/cafe/delete`
- Purpose: Delete a cafe item
- Triggered by: Admin user
- Steps:
  - Admin user logs in
  - Admin user navigates to cafe page
  - Admin user selects product to remove
  - System confirms deletion request
  - Product record is removed from database
  - Product is no longer available for purchase

- API Endpoint: `/api/cafe/items/topPurchases`
- Purpose: Get top 5 cafe purchases
- Triggered by: Admin user
- Steps:
  - Admin user logs in
  - Admin user navigates to dashboard page
  - System fetches top 5 cafe purchases from database
  - Top 5 cafe purchases are displayed in the dashboard

- API Endpoint: `/api/gemini/`
- Purpose: Member AI assistant
- Triggered by: Member
- Steps:
  - Member logs in
  - Member clicks on the AI assistant button in the navbar
  - Modal opens with AI assistant
  - Member interacts with AI assistant

## ğŸ§© Component Structure

The application uses a component-based architecture with the following key components:

### ğŸ“ Layout Components

- `Admin Sidebar`: Sidebar for the admin dashboard with links to the different pages
- `Pre Auth Navbar`: Navbar for the pre-auth landing page with links to different spots on the landing page and a login button
- `Post Auth Navbar`: Navbar for the post-auth dashboard with links to the user's barcode, profile, and notification.
- `Mobile Bottom Navbar`: Bottom navbar for the mobile app with links to the user's barcode, profile, and notification.

### ğŸ“„ Page Components

- `[Component]`: [Description]
- `Admin Dashboard Page`: Page for the admin to view the dashboard with top 5 cafe purchases and other metrics
- `Admin Messages Page`: Page for the admin to view all messages from the users + initiate a new message to the user
- `Admin View Message Page`: Page for the admin to view a specific message and its details
- `Admin View Class Page`: Page for the admin to view a specific class and its details
- `Admin View Analytics Page`: Page for the admin to view the analytics of the gym
- `Admin View Member Page`: Page for the admin to view a specific member and their information
- `Admin Members Page`: Page for the admin to view all members and their information + sign up new members
- `Admin View Member Page`: Page for the admin to view a specific member and their information
- `Admin Cafe Page`: Page for the admin to view all products in the cafe + add new products + view all transactions

### âš™ï¸ Feature Components

- `Send Admin Message Modal`: Modal for the admin to send a message to a user
- `Update Cafe Product Modal`: Modal for the admin to update a product in the cafe
- `Create Cafe Product Modal`: Modal for the admin to create a new product in the cafe
- `Admin Class Calendar`: Calendar for the admin to view all classes and their details
- `Admin Class Card`: Card for the admin to view a specific class and its details and holds cancel and view enrolled members buttons
- `Create Class Modal`: Modal for the admin to create a new class
- `Update Class Modal`: Modal for the admin to update a class
- `Cancel and Update Class Modal`: Modal for the admin to cancel a class or update a class

### ğŸ¨ UI Components

- `ActiveGymHours`: pie chart with darkest/most active hour slices popping out 
- `AnalyticsStatCard`: generic card component for statistics at top of admin analytics page
- `TargetRevenueCard`: shows progress to goal revenue 
- `MembershipGrowthCard`: bar graph showing growth or decline in gym memberships
- `ClassAttendanceCard`: horizontal bar chart showing how many users attending each class    
- `[Component]`: [Description]

---

## ğŸ”„ Data Flow

### ğŸ‘¤ [Key Flow 1] (e.g., User Registration)

| Step | Description   |
| ---- | ------------- |
| 1    | [First step]  |
| 2    | [Second step] |
| 3    | [Third step]  |
| 4    | [Fourth step] |
| 5    | [Fifth step]  |

### ğŸš— [Key Flow 2]

| Step | Description   |
| ---- | ------------- |
| 1    | [First step]  |
| 2    | [Second step] |
| 3    | [Third step]  |
| 4    | [Fourth step] |

<!-- Add more data flows as needed -->

---

## ğŸš€ Deployment

The application is designed to be deployed using Vercel and Supabase:

| Component                 | Deployment Solution        |
| ------------------------- | -------------------------- |
| **Frontend and API**      | Vercel                     |
| **Database**              | Supabase (PostgreSQL)      |
| **Authentication**        | Supabase Auth              |
| **File Storage**          | Supabase Storage           |
| **Environment Variables** | Vercel Environment Manager |

## ğŸ“ Commitlint Configuration

This project uses [commitlint](https://commitlint.js.org/) to enforce consistent commit message conventions. The configuration extends the conventional commit standards with custom rules.

### Configuration File

The commitlint configuration is defined in `.commitlintrc.json`:

```json
{
  "extends": ["@commitlint/config-conventional"],
  "rules": {
    "type-enum": [2, "always", ["feat", "fix", "chore", "docs", "style", "refactor", "revert", "build", "ci"]],
    "header-max-length": [2, "always", 120],
    "body-max-line-length": [2, "always", 200],
    "footer-max-line-length": [2, "always", 200],
    "subject-case": [0, "never", "sentence-case"]
  }
}
```

### Allowed Commit Types

| Type       | Description                                                   |
| ---------- | ------------------------------------------------------------- |
| `feat`     | New feature                                                   |
| `fix`      | Bug fix                                                       |
| `chore`    | Changes to build process or auxiliary tools                   |
| `docs`     | Documentation only changes                                    |
| `style`    | Changes that do not affect the meaning of code                |
| `refactor` | A code change that neither fixes a bug nor adds a feature     |
| `revert`   | Reverts a previous commit                                     |
| `build`    | Changes that affect the build system or external dependencies |
| `ci`       | Changes to CI configuration files and scripts                 |

### Example Commit Messages

```bash
feat: add user authentication system (PROJ-123)
fix: resolve navigation menu display issue (PROJ-456)
docs: update API documentation (PROJ-789)
chore: update dependencies to latest versions (PROJ-101)
style: format code according to prettier rules (PROJ-202)
refactor: simplify user profile component (PROJ-303)
```

## ğŸ’» Jira/Git Workflow

### Choose a Jira ticket

- In Jira, find a ticket to work on.
- Assign it to yourself and mark it as 'In Progress'.

### Create a branch from JIRA

- Use the JIRA interface to create a branch directly from the ticket. This will generate a branch name based on the ticket number and description.
- Follow the prompts to select the repository and branch source (usually `master`).
- Once the branch is created, copy the branch name.

### Local work

- Fetch the branch you created in Jira from the remote repository:

  ```bash
  git fetch origin [BRANCH-NAME]
  ```

- Check out the new branch:

  ```bash
  git checkout -b [BRANCH-NAME] origin/[BRANCH-NAME]
  ```

- Make your changes and then stage them. All commit messages must follow the project commitlint rules (see [Commitlint Configuration](#-commitlint-configuration) section above):
  - Start with one of the allowed commit types: `feat`, `fix`, `chore`, `docs`, `style`, `refactor`, `revert`, `build` or `ci`
  - Keep the header under 120 characters
  - The Jira ticket number should be at the end in parentheses

  Example commit commands:

  ```bash
  git commit -m "feat: add new button to dashboard (PROJ-123)"
  ```

  ```bash
  git commit -m "fix: resolve user fetch bug (PROJ-123)"
  ```

  ```bash
  git commit -m "chore: update dependencies (PROJ-123)"
  ```

### Push to GitHub and make a pull request

- Sync the remote repo with your local repo and your new branch:

  ```bash
  git push origin [TICKET-NUMBER]
  ```

- Under [GITHUB_REPO_URL/branches] you should find the branch you just pushed. Click on it.
- Click "Compare & pull request".
- Make sure base is set to master at the top.
- Adjust the title as needed and add a description.
- Add reviewers (2) by clicking the gear.
- Click "Create pull request".
- Once the PR is approved, the assignee (you) should complete the pull request by merging to master and delete the branch.
- Go back to Jira and change ticket status to done.

## ğŸ¨ Design System

In order to use the in-line color schema within any front-end component, under `className`, use one of the following color configuration names:

- `primary-[color]`
- `secondary-[color]`
- `accent-[color]`
- `neutral-[color]`
- `[additional-color-names]`

These can be applied to background colors, text colors and border colors using [CSS framework]'s utility classes.

### Example Usage

#### Background Color

```jsx
<div className='bg-primary-[color] p-4'>This div has a primary [color] background.</div>
```

## ğŸ“ Code Organization & Best Practices

| Directory / File      | Description                                                               |
| --------------------- | ------------------------------------------------------------------------- |
| `app/`                | Main application directory containing pages, API routes and entry points. |
| `app/api/`            | API route handlers (e.g., REST endpoints for client-server comms).        |
| `components/`         | Reusable React components and UI building blocks.                         |
| `constants/`          | Constants.                                                                |
| `constants/labels.ts` | All hardcoded strings, labels and configuration values.                   |
| `constants/icons.ts`  | Icon imports and icon component references.                               |
| `context/`            | React createContext, useContext hooks.                                    |
| `hooks/`              | Custom React hooks.                                                       |
| `types/`              | TypeScript type definitions and interfaces.                               |
| `types/shared.ts`     | Shared types/interfaces used across client and server.                    |
| `utils/`              | Utility functions.                                                        |
| `public/`             | Static assets (images, fonts, etc.) served directly by the app.           |
| `README.md`           | Project documentation and guidelines.                                     |

> **Tip:** Keep files and directories focused and organized according to their purpose for maintainability.
